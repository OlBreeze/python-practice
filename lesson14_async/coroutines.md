
## ‚öôÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ **–∫–æ—Ä—É—Ç–∏–Ω–∞**

**–ö–æ—Ä—É—Ç–∏–Ω–∞** coroutines ‚Äî —ç—Ç–æ –æ—Å–æ–±–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç:

* **–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** —Å–≤–æ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É—è –ø–æ—Ç–æ–∫);
* **–≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è** –ø–æ–∑–∂–µ —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞;
* **–æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏** —Å –≤—ã–∑—ã–≤–∞—é—â–∏–º –∫–æ–¥–æ–º.

–í Python –∫–æ—Ä—É—Ç–∏–Ω–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ **`async def`**.

---

### üîπ –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã

```python
import asyncio

async def greet():
    print("–ü—Ä–∏–≤–µ—Ç!")
    await asyncio.sleep(1)
    print("–ö–∞–∫ –¥–µ–ª–∞?")

asyncio.run(greet())
```

üìò –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

* `async def greet()` ‚Äî —ç—Ç–æ **–∫–æ—Ä—É—Ç–∏–Ω–∞**.
* `await asyncio.sleep(1)` ‚Äî **–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É,
  –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º **–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç** –ø–æ—Ç–æ–∫ (–¥—Ä—É–≥–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è).
* `asyncio.run()` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç "—Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π" –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É.

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏

–ï—Å–ª–∏ –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí `return`,
—Ç–æ –∫–æ—Ä—É—Ç–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã**, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ **–æ–∂–∏–¥–∞—Ç—å (`await`)**.

```python
async def example():
    return 42

result = asyncio.run(example())
print(result)  # 42
```

---

## üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ—Ä—É—Ç–∏–Ω

–¢—ã –º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Ä—É—Ç–∏–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**:

```python
import asyncio

async def task(name, delay):
    print(f"{name} —Å—Ç–∞—Ä—Ç—É–µ—Ç")
    await asyncio.sleep(delay)
    print(f"{name} –∑–∞–≤–µ—Ä—à–µ–Ω–∞")

async def main():
    await asyncio.gather(
        task("–ó–∞–¥–∞—á–∞ 1", 2),
        task("–ó–∞–¥–∞—á–∞ 2", 1),
        task("–ó–∞–¥–∞—á–∞ 3", 3),
    )

asyncio.run(main())
```

üïí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º (–≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞)**:

```
–ó–∞–¥–∞—á–∞ 1 —Å—Ç–∞—Ä—Ç—É–µ—Ç
–ó–∞–¥–∞—á–∞ 2 —Å—Ç–∞—Ä—Ç—É–µ—Ç
–ó–∞–¥–∞—á–∞ 3 —Å—Ç–∞—Ä—Ç—É–µ—Ç
–ó–∞–¥–∞—á–∞ 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
–ó–∞–¥–∞—á–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
–ó–∞–¥–∞—á–∞ 3 –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

---

## üîπ –ö–æ—Ä—É—Ç–∏–Ωa vs –ü–æ—Ç–æ–∫

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞     | –ö–æ—Ä—É—Ç–∏–Ω–∞ (asyncio)            | –ü–æ—Ç–æ–∫ (threading)                |
| ------------------ | ----------------------------- | -------------------------------- |
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ       | –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Python (`await`)  | –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –û–°                   |
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–¥–∞—á | –ë—ã—Å—Ç—Ä–æ–µ –∏ –ª—ë–≥–∫–æ–µ              | –ú–µ–¥–ª–µ–Ω–Ω–æ–µ, —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| –ü–∞–º—è—Ç—å             | –û–¥–∏–Ω –ø–æ—Ç–æ–∫, –æ–±—â–∞—è –ø–∞–º—è—Ç—å      | –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤, –æ–±—â–∞—è –ø–∞–º—è—Ç—å  |
| –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è       | I/O –∑–∞–¥–∞—á (–∑–∞–ø—Ä–æ—Å—ã, –æ–∂–∏–¥–∞–Ω–∏–µ) | –¢–æ–∂–µ I/O, –Ω–æ —Ç—è–∂–µ–ª–µ–µ             |
| –î–ª—è CPU            | ‚ùå –ù–µ—Ç                         | ‚ö†Ô∏è –ù–µ—Ç (GIL –º–µ—à–∞–µ—Ç)              |

---

## üîπ –ö–æ—Ä—É—Ç–∏–Ωa –∏ `yield`

–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ **–∫–æ—Ä—É—Ç–∏–Ω—ã** –ø–æ—è–≤–∏–ª–∏—Å—å –∏–∑ **–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤**.
–†–∞–Ω—å—à–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–∏—Å–∞—Ç—å —Ç–∞–∫:

```python
def simple_coroutine():
    print("–ù–∞—á–∞–ª–æ")
    x = yield
    print("–ü–æ–ª—É—á–µ–Ω–æ:", x)

c = simple_coroutine()
next(c)          # –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ –ø–µ—Ä–≤–æ–≥–æ yield
c.send("–ü—Ä–∏–≤–µ—Ç") # –ø–µ—Ä–µ–¥–∞—ë–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ—Ä—É—Ç–∏–Ω—É
```

üß† –≠—Ç–æ ‚Äî **–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∫–æ—Ä—É—Ç–∏–Ω—ã** (–¥–æ Python 3.5).
–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ (`async/await`) ‚Äî —ç—Ç–æ –∏—Ö **–Ω–æ–≤–∞—è, —É–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞**.

---

## üöÄ –ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å

| –ß—Ç–æ                | –û–ø–∏—Å–∞–Ω–∏–µ                                                        |
| ------------------ | --------------------------------------------------------------- |
| `async def`        | —Å–æ–∑–¥–∞—ë—Ç –∫–æ—Ä—É—Ç–∏–Ω—É                                                |
| `await`            | –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–æ–∫–∞ –¥—Ä—É–≥–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è |
| `asyncio.run()`    | –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π                                          |
| `asyncio.gather()` | –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—Ä—É—Ç–∏–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ                         |

---
