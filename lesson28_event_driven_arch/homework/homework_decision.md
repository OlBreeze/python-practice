

## **–ó–∞–≤–¥–∞–Ω–Ω—è 1: EventBus**

**–ö—Ä–æ–∫ 1:** –°—Ç–≤–æ—Ä—é—î–º–æ –∫–ª–∞—Å –∑ —Ç—Ä—å–æ–º–∞ –≥–æ–ª–æ–≤–Ω–∏–º–∏ —Å–ª–æ–≤–Ω–∏–∫–∞–º–∏/—Å–ø–∏—Å–∫–∞–º–∏:
- `listeners` - –∑–±–µ—Ä—ñ–≥–∞—î, —Ö—Ç–æ –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π –Ω–∞ —è–∫—É –ø–æ–¥—ñ—é
- `event_log` - –∑–±–µ—Ä—ñ–≥–∞—î —ñ—Å—Ç–æ—Ä—ñ—é –≤—Å—ñ—Ö –ø–æ–¥—ñ–π

**–ö—Ä–æ–∫ 2:** –ú–µ—Ç–æ–¥ `subscribe()` - –¥–æ–¥–∞—î —Ñ—É–Ω–∫—Ü—ñ—é (callback) –¥–æ —Å–ø–∏—Å–∫—É —Å–ª—É—Ö–∞—á—ñ–≤
- –Ø–∫—â–æ –ø–æ–¥—ñ—ó —â–µ –Ω–µ–º–∞—î –≤ —Å–ª–æ–≤–Ω–∏–∫—É - —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π —Å–ø–∏—Å–æ–∫
- –î–æ–¥–∞—î–º–æ callback –≤ —Ü–µ–π —Å–ø–∏—Å–æ–∫

**–ö—Ä–æ–∫ 3:** –ú–µ—Ç–æ–¥ `emit()` - –∑–∞–ø—É—Å–∫–∞—î –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –ø—ñ–¥–ø–∏—Å–∞–Ω—ñ –Ω–∞ –ø–æ–¥—ñ—é
- –°–ø–æ—á–∞—Ç–∫—É –ª–æ–≥—É—î –ø–æ–¥—ñ—é
- –ü–æ—Ç—ñ–º –≤–∏–∫–ª–∏–∫–∞—î –≤—Å—ñ callback –¥–ª—è —Ç–æ—á–Ω–æ—ó –ø–æ–¥—ñ—ó
- –ü–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—è—î wildcard –ø—ñ–¥–ø–∏—Å–∫–∏ (—è–∫—â–æ –ø–æ–¥—ñ—è `user.registered`, —Ç–æ –∑–∞–ø—É—Å–∫–∞—î `user.*`)

**–ö—Ä–æ–∫ 4:** Wildcard –ø—Ä–∞—Ü—é—î —Ç–∞–∫:
- –†–æ–∑–±–∏–≤–∞—î–º–æ –Ω–∞–∑–≤—É –ø–æ–¥—ñ—ó –∑–∞ –∫—Ä–∞–ø–∫–æ—é: `user.registered` ‚Üí `['user', 'registered']`
- –ë–µ—Ä–µ–º–æ –ø–µ—Ä—à—É —á–∞—Å—Ç–∏–Ω—É + `.*` ‚Üí `user.*`
- –®—É–∫–∞—î–º–æ listeners –¥–ª—è —Ü—å–æ–≥–æ wildcard

---


## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 2 (–ó–∞–≤–¥–∞–Ω–Ω—è 3)**

### **–ú–æ–¥—É–ª—å 1: OrderService**
**–©–æ —Ä–æ–±–∏—Ç—å:** –ö–µ—Ä—É—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏
- `create_order()` - —Å—Ç–≤–æ—Ä—é—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —ñ –≥–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—é `order.created`
- `pay_order()` - –ø–æ–∑–Ω–∞—á–∞—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ–ø–ª–∞—á–µ–Ω–∏–º —ñ –≥–µ–Ω–µ—Ä—É—î `order.paid`

### **–ú–æ–¥—É–ª—å 2: NotificationService**
**–©–æ —Ä–æ–±–∏—Ç—å:** –†–µ–∞–≥—É—î –Ω–∞ –ø–æ–¥—ñ—ó —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏
- –í `__init__` –ø—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ –ø–æ–¥—ñ—ó —á–µ—Ä–µ–∑ `bus.subscribe()`
- `send_email()` —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –Ω–∞ `order.created`
- `send_sms()` —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –Ω–∞ `order.paid`

### **–ú–æ–¥—É–ª—å 3: AnalyticsService**
**–©–æ —Ä–æ–±–∏—Ç—å:** –ó–±–∏—Ä–∞—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –†–∞—Ö—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å —á–µ—Ä–µ–∑ `count_order()`
- –†–∞—Ö—É—î –æ–ø–ª–∞—Ç–∏ —Ç–∞ –≤–∏—Ä—É—á–∫—É —á–µ—Ä–µ–∑ `count_payment()`
- –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∑–º—ñ–Ω–Ω–∏—Ö –∫–ª–∞—Å—É

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î —Ä–∞–∑–æ–º:**
1. OrderService –≥–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—é ‚Üí 
2. EventBus –ø–µ—Ä–µ–¥–∞—î —ó—ó –≤—Å—ñ–º –ø—ñ–¥–ø–∏—Å–Ω–∏–∫–∞–º ‚Üí
3. NotificationService —ñ AnalyticsService –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–¥—ñ—é –æ–¥–Ω–æ—á–∞—Å–Ω–æ

---


## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 2 (–ó–∞–≤–¥–∞–Ω–Ω—è 4) - –ß–µ—Ä–≥–∞**

### **–Ø–∫ –ø—Ä–∞—Ü—é—î —á–µ—Ä–≥–∞:**

**–ö—Ä–æ–∫ 1: Producer (—Ç–æ–π, —Ö—Ç–æ –≥–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—ó)**
- –í–∏–∫–ª–∏–∫–∞—î `bus.emit()` 
- –ü–æ–¥—ñ—è –ù–ï –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É, –∞ –∫–ª–∞–¥–µ—Ç—å—Å—è –≤ `queue.Queue()`
- Producer –º–æ–∂–µ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏, –Ω–µ —á–µ–∫–∞—é—á–∏ –æ–±—Ä–æ–±–∫–∏

**–ö—Ä–æ–∫ 2: Worker (—Ç–æ–π, —Ö—Ç–æ –æ–±—Ä–æ–±–ª—è—î)**
- –ü—Ä–∞—Ü—é—î –≤ –æ–∫—Ä–µ–º–æ–º—É –ø–æ—Ç–æ—Ü—ñ (`threading.Thread`)
- –ü–æ—Å—Ç—ñ–π–Ω–æ —á–µ–∫–∞—î –Ω–æ–≤—ñ –ø–æ–¥—ñ—ó –≤ —á–µ—Ä–∑—ñ —á–µ—Ä–µ–∑ `queue.get()`
- –ö–æ–ª–∏ –ø–æ–¥—ñ—è –ø—Ä–∏—Ö–æ–¥–∏—Ç—å - –≤–∏–∫–ª–∏–∫–∞—î –≤—Å—ñ listener-–∏

**–ö—Ä–æ–∫ 3: –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫**
- –ö–æ–∂–µ–Ω listener –æ–±–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –≤ `try/except`
- –Ø–∫—â–æ –æ–¥–∏–Ω listener –ø–∞–¥–∞—î - —Ä–µ—à—Ç–∞ –ø—Ä–æ–¥–æ–≤–∂—É—é—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏
- Worker –ø—Ä–æ–¥–æ–≤–∂—É—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–¥—ñ—ó

**–ù–∞–≤—ñ—â–æ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- üöÄ **–®–≤–∏–¥–∫—ñ—Å—Ç—å:** Producer –Ω–µ —á–µ–∫–∞—î, –ø–æ–∫–∏ –≤—Å—ñ listener-–∏ —Å–ø—Ä–∞—Ü—é—é—Ç—å
- üõ°Ô∏è **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å:** –ü–æ–º–∏–ª–∫–∞ –≤ –æ–¥–Ω–æ–º—É listener –Ω–µ –∑—É–ø–∏–Ω—è—î –≤—Å—é —Å–∏—Å—Ç–µ–º—É
- ‚öñÔ∏è **–ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è:** –ú–æ–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ worker-—ñ–≤ –¥–ª—è —à–≤–∏–¥—à–æ—ó –æ–±—Ä–æ–±–∫–∏

---


## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 3 (–ó–∞–≤–¥–∞–Ω–Ω—è 5) - Event Replay**

### **–Ø–∫ –ø—Ä–∞—Ü—é—î Event Replay:**

**–ö—Ä–æ–∫ 1: –ó–∞–ø–∏—Å –ø–æ–¥—ñ–π**
- –ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —É —Ñ–∞–π–ª `events.log` —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON
- –ö–æ–∂–µ–Ω —Ä—è–¥–æ–∫ = –æ–¥–Ω–∞ –ø–æ–¥—ñ—è
- –§–æ—Ä–º–∞—Ç: `{"timestamp": "...", "event": "...", "data": {...}}`

**–ö—Ä–æ–∫ 2: –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è**
- –ß–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª –ª—ñ–Ω—ñ—è –∑–∞ –ª—ñ–Ω—ñ—î—é
- –ü–∞—Ä—Å–∏–º–æ JSON
- –í–∏–∫–ª–∏–∫–∞—î–º–æ listener-–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó –ø–æ–¥—ñ—ó
- **–í–∞–∂–ª–∏–≤–æ:** –ù–ï –∑–∞–ø–∏—Å—É—î–º–æ –ø–æ–¥—ñ—ó –ø–æ–≤—Ç–æ—Ä–Ω–æ (—ñ–Ω–∞–∫—à–µ –±—É–¥–µ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª)

**–ö—Ä–æ–∫ 3: –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è**
- –°—Ç–≤–æ—Ä—é—î–º–æ —Ä–∞—Ö—É–Ω–æ–∫ –∑ –±–∞–ª–∞–Ω—Å–æ–º 1000 –≥—Ä–Ω
- –†–æ–±–∏–º–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó (–±–∞–ª–∞–Ω—Å —Å—Ç–∞—î, —Å–∫–∞–∂—ñ–º–æ, 2000 –≥—Ä–Ω)
- –°—Ç–≤–æ—Ä—é—î–º–æ –ù–û–í–ò–ô —Ä–∞—Ö—É–Ω–æ–∫ –∑ 1000 –≥—Ä–Ω
- –†–æ–±–∏–º–æ replay - –±–∞–ª–∞–Ω—Å —Å—Ç–∞—î 2000 –≥—Ä–Ω
- **–ú–∞–≥—ñ—è:** –ú–∏ –≤—ñ–¥–Ω–æ–≤–∏–ª–∏ —Å—Ç–∞–Ω –±–µ–∑ –ë–î!

**–î–µ —Ü–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:**
- üè¶ **–ë–∞–Ω–∫–∏** - –∞—É–¥–∏—Ç –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- üì¶ **Kafka** - —Å–∞–º–µ —Ç–∞–∫ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- üéÆ **–Ü–≥—Ä–∏** - —Å–∏—Å—Ç–µ–º–∞ replay –º–∞—Ç—á—ñ–≤
- üìä **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞** - –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫

---

## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 3 (–ó–∞–≤–¥–∞–Ω–Ω—è 6) - RabbitMQ** (—Å–ø—Ä–æ—â–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è —á–µ—Ä–µ–∑ —ñ–º—ñ—Ç–∞—Ü—ñ—é):

### **–ö–æ–Ω—Ü–µ–ø—Ü—ñ—è:**

**Producer ‚Üí Exchange ‚Üí Queue ‚Üí Consumer(s)**

**–ö—Ä–æ–∫ 1: Exchange (—Ç–æ—á–∫–∞ –æ–±–º—ñ–Ω—É)**
- –¶–µ "–ø–æ—à—Ç–æ–≤–µ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è" –∫—É–¥–∏ Producer –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –í –Ω–∞—à–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ: `user_events`

**–ö—Ä–æ–∫ 2: Producer**
- –ì–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤ Exchange
- –ù–µ –∑–Ω–∞—î, —Ö—Ç–æ –±—É–¥–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–¥—ñ—é

**–ö—Ä–æ–∫ 3: Consumers (Worker-–∏)**
- –ö–æ–∂–µ–Ω worker –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ Exchange
- –ß–∏—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —ñ–Ω—à–∏—Ö
- –û–±—Ä–æ–±–ª—è—î —É —Å–≤–æ—î–º—É —Ç–µ–º–ø—ñ

**–ö–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:**
- üîÑ **–ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:** –î–æ–¥–∞—î—à worker-—ñ–≤ - –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è —à–≤–∏–¥–∫—ñ—Å—Ç—å
- üõ°Ô∏è **–Ü–∑–æ–ª—è—Ü—ñ—è:** –ü–∞–¥—ñ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ worker –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —ñ–Ω—à—ñ
- üì¶ **–ì–∞—Ä–∞–Ω—Ç—ñ—è –¥–æ—Å—Ç–∞–≤–∫–∏:** RabbitMQ –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –ø–æ–∫–∏ —ó—Ö –Ω–µ –æ–±—Ä–æ–±–∏–ª–∏

---


## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 3 (–ó–∞–≤–¥–∞–Ω–Ω—è 7) - Webhook**

### **–©–æ —Ç–∞–∫–µ Webhook:**

–¶–µ "–æ–±–µ—Ä–Ω–µ–Ω–∏–π API call" - –Ω–µ —Ç–∏ –∑–∞–ø–∏—Ç—É—î—à –¥–∞–Ω—ñ, –∞ —Ç–æ–±—ñ —ó—Ö –ù–ê–î–°–ò–õ–ê–Æ–¢–¨ –∫–æ–ª–∏ —â–æ—Å—å –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

**–ö—Ä–æ–∫ 1: –ó–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å (GitHub/Stripe/LiqPay)**
- –©–æ—Å—å –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è (–æ–ø–ª–∞—Ç–∞, push –∫–æ–¥—É, —Ç–æ—â–æ)
- –í—ñ–¥–ø—Ä–∞–≤–ª—è—î POST –∑–∞–ø–∏—Ç –Ω–∞ —Ç–≤—ñ–π —Å–µ—Ä–≤–µ—Ä

**–ö—Ä–æ–∫ 2: –¢–≤—ñ–π —Å–µ—Ä–≤–µ—Ä (Flask)**
- –û—Ç—Ä–∏–º—É—î JSON —á–µ—Ä–µ–∑ –µ–Ω–¥–ø–æ—ñ–Ω—Ç `/webhook/order`
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –¥–∞–Ω—ñ
- –ì–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—é –≤ EventBus

**–ö—Ä–æ–∫ 3: EventBus Worker**
- –û–±—Ä–æ–±–ª—è—î –ø–æ–¥—ñ—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –í–∏–∫–ª–∏–∫–∞—î –≤—Å—ñ listener-–∏ (email, –ª–æ–≥, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞)

**–ö—Ä–æ–∫ 4: –í—ñ–¥–ø–æ–≤—ñ–¥—å**
- –°–µ—Ä–≤–µ—Ä —à–≤–∏–¥–∫–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î "200 OK"
- –û–±—Ä–æ–±–∫–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è —É —Ñ–æ–Ω—ñ

**–ù–∞–≤—ñ—â–æ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**
- üîî **–†–µ–∞–ª-—Ç–∞–π–º —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è** –±–µ–∑ –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ polling
- ‚ö° **–®–≤–∏–¥–∫—ñ—Å—Ç—å** - –¥—ñ–∑–Ω–∞—î—à—Å—è –æ–¥—Ä–∞–∑—É, –∫–æ–ª–∏ —â–æ—Å—å —Ç—Ä–∞–ø–∏–ª–æ—Å—å
- üí∞ **–ï–∫–æ–Ω–æ–º—ñ—è** - –Ω–µ —Ç—Ä–µ–±–∞ –ø–æ—Å—Ç—ñ–π–Ω–æ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ API

---

## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 4 (–ó–∞–≤–¥–∞–Ω–Ω—è 8) - File Kafka** –Ω–∞ —Ñ–∞–π–ª–∞—Ö

### **–©–æ —Ç–∞–∫–µ Log-based Storage:**

–¶–µ –∫–æ–ª–∏ –¥–∞–Ω—ñ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ –∫—ñ–Ω–µ—Ü—å —Ñ–∞–π–ª—É (append-only) —ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è.

**–ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó:**

**1. Offset (–∑–º—ñ—â–µ–Ω–Ω—è)**
- –¶–µ –Ω–æ–º–µ—Ä —Ä—è–¥–∫–∞ –≤ —Ñ–∞–π–ª—ñ
- Consumer –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î: "–Ø –ø—Ä–æ—á–∏—Ç–∞–≤ –¥–æ —Ä—è–¥–∫–∞ 5"
- –ù–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–∞–∑—É –ø–æ—á–∏–Ω–∞—î –∑ —Ä—è–¥–∫–∞ 6

**2. Append-only Log**
- Producer —Ç—ñ–ª—å–∫–∏ –¥–æ–ø–∏—Å—É—î –≤ –∫—ñ–Ω–µ—Ü—å
- –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–º—ñ–Ω—é—î —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ
- –Ø–∫ –∂—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ—ó

**3. –ù–µ–∑–∞–ª–µ–∂–Ω—ñ Consumer-–∏**
- –ö–æ–∂–µ–Ω –º–∞—î —Å–≤—ñ–π offset
- Consumer 1 –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞ —Ä—è–¥–∫—É 10
- Consumer 2 –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞ —Ä—è–¥–∫—É 3
- –í–æ–Ω–∏ –Ω–µ –∑–∞–≤–∞–∂–∞—é—Ç—å –æ–¥–∏–Ω –æ–¥–Ω–æ–º—É

**4. Replay (–ø–µ—Ä–µ–≥—Ä–∞–≤–∞–Ω–Ω—è)**
- –°–∫–∏–¥–∞—î–º–æ offset –Ω–∞ 0
- –ü–µ—Ä–µ—á–∏—Ç—É—î–º–æ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é
- –Ø–∫ –ø–µ—Ä–µ–º–æ—Ç—É–≤–∞–Ω–Ω—è –∫–∞—Å–µ—Ç–∏ –Ω–∞–∑–∞–¥

**–ß–æ–º—É —Ü–µ —à–≤–∏–¥–∫–æ:**
- ‚úçÔ∏è –ó–∞–ø–∏—Å —Ç—ñ–ª—å–∫–∏ –≤ –∫—ñ–Ω–µ—Ü—å (–Ω–∞–π—à–≤–∏–¥—à–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–∞ –¥–∏—Å–∫—É)
- üìñ –ß–∏—Ç–∞–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–µ (–±–µ–∑ –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø—É)
- üöÄ Kafka –æ–±—Ä–æ–±–ª—è—î 10+ –º—ñ–ª—å–π–æ–Ω—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –Ω–∞ —Å–µ–∫—É–Ω–¥—É —Å–∞–º–µ –∑–∞–≤–¥—è–∫–∏ —Ü—å–æ–º—É

---

## üìò **–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –†—ñ–≤–Ω—è 4 (–ó–∞–≤–¥–∞–Ω–Ω—è 9) - Saga Pattern**

### **–©–æ —Ç–∞–∫–µ Saga:**

–¶–µ —Å–ø–æ—Å—ñ–± —Ä–æ–±–∏—Ç–∏ "—Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó" –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏, –∫–æ–ª–∏ –Ω–µ–º–∞—î —î–¥–∏–Ω–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –£ –º–æ–Ω–æ–ª—ñ—Ç–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É: `BEGIN TRANSACTION` ‚Üí —Ä–æ–±–∏–º–æ –≤—Å–µ ‚Üí `COMMIT` –∞–±–æ `ROLLBACK`
- –£ –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∞—Ö: –∫–æ–∂–µ–Ω —Å–µ—Ä–≤—ñ—Å –º–∞—î —Å–≤–æ—é –ë–î, –Ω–µ–º–∞—î –∑–∞–≥–∞–ª—å–Ω–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

**–†—ñ—à–µ–Ω–Ω—è - Saga Pattern:**
–†–æ–±–∏–º–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤, –∫–æ–∂–µ–Ω –∑ —è–∫–∏—Ö –º–æ–∂–Ω–∞ –≤—ñ–¥–∫–æ—Ç–∏—Ç–∏

### **–Ø–∫ –ø—Ä–∞—Ü—é—î:**

**–ö—Ä–æ–∫ 1: –í–∏–∫–æ–Ω–∞–Ω–Ω—è**
- –†–µ–∑–µ—Ä–≤—É—î–º–æ —Ç–æ–≤–∞—Ä ‚úÖ
- –°–ø–∏—Å—É—î–º–æ –≥—Ä–æ—à—ñ ‚úÖ
- –°—Ç–≤–æ—Ä—é—î–º–æ –¥–æ—Å—Ç–∞–≤–∫—É ‚úÖ

**–ö—Ä–æ–∫ 2: –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞**
- –°–∫–∞—Å–æ–≤—É—î–º–æ –¥–æ—Å—Ç–∞–≤–∫—É ‚Ü©Ô∏è
- –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –≥—Ä–æ—à—ñ ‚Ü©Ô∏è
- –°–∫–∞—Å–æ–≤—É—î–º–æ —Ä–µ–∑–µ—Ä–≤—É–≤–∞–Ω–Ω—è ‚Ü©Ô∏è

**–ö—Ä–æ–∫ 3: –õ–æ–≥—É–≤–∞–Ω–Ω—è**
- –ö–æ–∂–Ω–∞ –¥—ñ—è –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è
- –ú–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ –¥–µ –ø—Ä–æ–≤–∞–ª–∏–ª–æ—Å—è
- –ú–æ–∂–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏ –≤–µ—Å—å –ª–∞–Ω—Ü—é–∂–æ–∫

### **–¢–∏–ø–∏ Saga:**

1. **Choreography (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ—ñ—è)**
   - –ö–æ–∂–µ–Ω —Å–µ—Ä–≤—ñ—Å –∑–Ω–∞—î, —â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ
   - –ü–æ–¥—ñ—ó —á–µ—Ä–µ–∑ EventBus
   - –ù–µ–º–∞—î —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞

2. **Orchestration (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è)** ‚Üê –Ω–∞—à –ø—Ä–∏–∫–ª–∞–¥
   - –Ñ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (Orchestrator)
   - –í—ñ–Ω –∫–µ—Ä—É—î –≤—Å—ñ–º–∞ –∫—Ä–æ–∫–∞–º–∏
   - –ü—Ä–æ—Å—Ç—ñ—à–µ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏

### **–†–µ–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏:**

- üõí **Uber Eats:** –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫—É—Ä'—î—Ä–∞
- üè® **Booking.com:** –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –≥–æ—Ç–µ–ª—é ‚Üí –∫–≤–∏—Ç–∫–∏ ‚Üí —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä
- üí∞ **–ë–∞–Ω–∫–∏:** –ø–µ—Ä–µ–∫–∞–∑ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –±–∞–Ω–∫–∞–º–∏
- üì¶ **Amazon:** –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí —Å–∫–ª–∞–¥ ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Üí —ñ–Ω–≤–æ–π—Å

---
### –ö–æ–∂–µ–Ω —Ñ–∞–π–ª –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –æ–∫—Ä–µ–º–æ —Ç–∞ –ø–æ–±–∞—á–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üöÄ

---
# üéØ Event-Driven Architecture - –ü—ñ–¥—Å—É–º–∫–∏

## üìö –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### üü¢ –†—ñ–≤–µ–Ω—å 1 - –ë–∞–∑–æ–≤–∏–π
- ‚úÖ **EventBus** –∑ –ø—ñ–¥–ø–∏—Å–∫–æ—é, –≤—ñ–¥–ø–∏—Å–∫–æ—é, emit
- ‚úÖ **Wildcard –ø—ñ–¥–ø–∏—Å–∫–∏** (`user.*`)
- ‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –≤—Å—ñ—Ö –ø–æ–¥—ñ–π
- ‚úÖ **3 –ø–æ–¥—ñ—ó**: user.registered, user.deleted, order.created
- ‚úÖ **3 listener-–∏**: email_sender, logger, analytics

### üü° –†—ñ–≤–µ–Ω—å 2 - –°–µ—Ä–µ–¥–Ω—ñ–π
- ‚úÖ **–°–∏–º—É–ª—è—Ü—ñ—è –º–∞–≥–∞–∑–∏–Ω—É** –∑ 3 –º–æ–¥—É–ª—è–º–∏:
  - OrderService (–≥–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—ó)
  - NotificationService (email, SMS)
  - AnalyticsService (—Ä–∞—Ö—É—î –º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ **–ß–µ—Ä–≥–∞ –ø–æ–¥—ñ–π** —á–µ—Ä–µ–∑ `queue.Queue`
- ‚úÖ **Worker** —â–æ –Ω–µ –ø–∞–¥–∞—î –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞**

### üî• –†—ñ–≤–µ–Ω—å 3 - –ü—Ä–æ—Å—É–Ω—É—Ç–∏–π
- ‚úÖ **Event Replay** - –∑–∞–ø–∏—Å –ø–æ–¥—ñ–π —É —Ñ–∞–π–ª —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è
- ‚úÖ **RabbitMQ —ñ–º—ñ—Ç–∞—Ü—ñ—è** - producer/consumer pattern
- ‚úÖ **Webhook Server** –Ω–∞ Flask
  - POST `/webhook/order` –ø—Ä–∏–π–º–∞—î –ø–æ–¥—ñ—ó
  - EventBus –æ–±—Ä–æ–±–ª—è—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

### üíé –†—ñ–≤–µ–Ω—å 4 - Hard Mode
- ‚úÖ **File-based Kafka** - log storage –∑ offset
  - Producer –¥–æ–ø–∏—Å—É—î –≤ –∫—ñ–Ω–µ—Ü—å
  - Consumer —á–∏—Ç–∞—î –∑ offset-—É
  - –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å replay
- ‚úÖ **Saga Pattern** - —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
  - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –∫—Ä–æ–∫—ñ–≤
  - –ö–æ–º–ø–µ–Ω—Å—É—é—á—ñ –¥—ñ—ó –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö

---