# üß© –ó–∞–≤–¥–∞–Ω–Ω—è: Event-Driven Architecture (EDA)

## üü¢ –†—ñ–≤–µ–Ω—å 1 ‚Äî –ë–∞–∑–æ–≤–∏–π (must have)

### 1. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π EventBus (—Ä–æ–∑—à–∏—Ä–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**

* `subscribe(event_name, callback)`
* `unsubscribe(event_name, callback)`
* `emit(event_name, data)`
* –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–¥—ñ–π (–≤ –æ–∫—Ä–µ–º–∏–π —Å–ø–∏—Å–æ–∫)
* –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ wildcard –ø—ñ–¥–ø–∏—Å–æ–∫ (`user.*`, `order.*`)

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```python
bus.subscribe("user.registered", send_welcome_email)
bus.subscribe("user.*", log_all_user_events)
```

---

### 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ 3 –ø–æ–¥—ñ—ó —Ç–∞ 3 listener-–∏

**–ü–æ–¥—ñ—ó:**

* `"user.registered"`
* `"user.deleted"`
* `"order.created"`

**Listeners:**

* `email_sender`
* `logger`
* `analytics`

–ü—Ä–∏ –µ–º—ñ—Å—ñ—è—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ listeners –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è.

---

## üü° –†—ñ–≤–µ–Ω—å 2 ‚Äî –°–µ—Ä–µ–¥–Ω—ñ–π

### 3. –ú—ñ–Ω—ñ-—Å–∏–º—É–ª—è—Ü—ñ—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É

–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç—Ä–∏ –º–æ–¥—É–ª—ñ:

#### `order_service.py`

–ì–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—ó:

* `"order.created"`
* `"order.paid"`

#### `notification_service.py`

–†–µ–∞–≥—É—î –Ω–∞ –ø–æ–¥—ñ—ó:

* email –ø—Ä–∏ `"order.created"`
* SMS –ø—Ä–∏ `"order.paid"`

#### `analytics_service.py`

–ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î:

* –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å
* –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø–ª–∞—Ç

–£—Å—ñ –ø–æ–¥—ñ—ó –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–∞—à EventBus.

---

### 4. –î–æ–¥–∞—Ç–∏ —á–µ—Ä–≥—É –ø–æ–¥—ñ–π

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –æ–±—Ä–æ–±–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `queue.Queue` –∞–±–æ `multiprocessing.Queue`.

**–í–∏–º–æ–≥–∏:**

* producer –∫–∏–¥–∞—î –ø–æ–¥—ñ—ó –≤ —á–µ—Ä–≥—É
* worker —á–∏—Ç–∞—î –ø–æ–¥—ñ—ó —Ç–∞ –æ–±—Ä–æ–±–ª—è—î
* worker –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –ø–∞–¥–∞—Ç–∏ –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫

---

## üî• –†—ñ–≤–µ–Ω—å 3 ‚Äî –ü—Ä–æ—Å—É–Ω—É—Ç–∏–π (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### 5. –ó—Ä–æ–±–∏—Ç–∏ Event Replay

–ó–∞–ø–∏—Å—É–≤–∞—Ç–∏ —É—Å—ñ –ø–æ–¥—ñ—ó –≤ `events.log` —É JSON.

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏:

```python
bus.replay_from_file("events.log")
```

**–ú–µ—Ç–∞:** —Å–∏–º—É–ª—é–≤–∞—Ç–∏ "–≤—ñ–¥–∫–∞—Ç" –∞–±–æ "–ø—Ä–æ–≥—Ä–∞–≤–∞–Ω–Ω—è" —ñ—Å—Ç–æ—Ä—ñ—ó (—è–∫ —É Kafka / Event Sourcing).

---

### 6. –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ RabbitMQ –∞–±–æ Redis pub/sub

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø—Ä–æ–¥–∞–∫—à–Ω-–ø—Ä–∏–∫–ª–∞–¥:**

* —Å–µ—Ä–≤–µ—Ä –≤–∏–¥–∞—î –ø–æ–¥—ñ—é `"user.registered"`
* –¥–≤–∞ worker-–∏ —Å–ª—É—Ö–∞—é—Ç—å —Ü—é –ø–æ–¥—ñ—é:

  * `email_worker`
  * `analytics_worker`

**–î–æ–¥–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:**

* –∑–∞–ø—É—Å–∫ RabbitMQ (docker-compose –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–æ)
* –∑–∞–ø—É—Å–∫ producer-–∞
* –∑–∞–ø—É—Å–∫ worker-—ñ–≤

---

### 7. –ó—Ä–æ–±–∏—Ç–∏ Webhook Listener

–ú—ñ–Ω—ñ-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Flask/Django/FastAPI, –º–∞—Ä—à—Ä—É—Ç:

```
POST /webhook/order
```

–ü—Ä–∏—Ö–æ–¥–∏—Ç—å JSON:

```json
{"order_id": 777, "status": "created"}
```

–°–µ—Ä–≤–µ—Ä:

* –ø—Ä–∏–π–º–∞—î webhook
* —Å—Ç–≤–æ—Ä—é—î –ø–æ–¥—ñ—é –≤ EventBus
* worker —Ä–µ–∞–≥—É—î (email/log)

–†–µ–∞–ª—å–Ω–∏–π –∫–µ–π—Å —ñ–∑ GitHub/Stripe/LiqPay.

---

## üíé –†—ñ–≤–µ–Ω—å 4 ‚Äî Hard Mode (Senior)

### 8. –ó—Ä–æ–±–∏—Ç–∏ –∞–Ω–∞–ª–æ–≥ Kafka –Ω–∞ —Ñ–∞–π–ª–∞—Ö

–õ–æ–≥—ñ–∫–∞:

* ‚Äútopic‚Äù = —Ñ–∞–π–ª
* –∫–æ–∂–µ–Ω consumer –º–∞—î —Å–≤—ñ–π offset
* producer –¥–æ–ø–∏—Å—É—î –ø–æ–¥—ñ—ó –≤ –∫—ñ–Ω–µ—Ü—å
* consumer —á–∏—Ç–∞—î –Ω–æ–≤—ñ —Ä—è–¥–∫–∏

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏:

```python
producer.send("orders", {"id": 15})
consumer.subscribe("orders")
consumer.poll()
```

–†–æ–∑—É–º—ñ–Ω–Ω—è:

* log-based storage
* offset
* –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è Kafka

---

### 9. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ Saga Pattern

–ü—Ä–∏–¥—É–º–∞—Ç–∏ –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å:
**–æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí —Ä–µ–∑–µ—Ä–≤ –∫–æ—à—Ç—ñ–≤ ‚Üí –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è ‚Üí –¥–æ—Å—Ç–∞–≤–∫–∞**

–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ SAGA:

* –∫–æ–∂–Ω–∞ –¥—ñ—è = –ø–æ–¥—ñ—è
* –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ ‚Äî –∫–æ–º–ø–µ–Ω—Å—É—é—á–∞ –ø–æ–¥—ñ—è
* –ª–æ–≥—É–≤–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å

---

## üì§ –©–æ —Ç—Ä–µ–±–∞ –∑–¥–∞—Ç–∏

* –ö–æ–¥ EventBus
* –ö–æ–¥ —Å–∏–º—É–ª—è—Ü—ñ—ó –º–∞–≥–∞–∑–∏–Ω—É
* –õ–æ–≥–∏ –ø–æ–¥—ñ–π
* *(–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)* RabbitMQ-–ø—Ä–æ—î–∫—Ç
* *(–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)* Webhook
* *(–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)* Kafka-file demo

---

## üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ

* —è–∫—ñ –ø–ª—é—Å–∏ EDA
* –¥–µ –± –∑–∞—Å—Ç–æ—Å—É–≤–∞–ª–∏ —É —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ

---
