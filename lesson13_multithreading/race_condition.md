–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –ø—Ä–∏–º–µ—Ä **Race Condition** (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏) –Ω–∞ Python:

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞: Race Condition

```python
import threading
import time

# –û–±—â–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Ä–∞–∑–¥–µ–ª—è–µ–º—ã–π —Ä–µ—Å—É—Ä—Å)
balance = 1000

def withdraw(amount):
    """–°–Ω—è—Ç–∏–µ –¥–µ–Ω–µ–≥ —Å–æ —Å—á–µ—Ç–∞"""
    global balance
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
    if balance >= amount:
        print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –ü—Ä–æ–≤–µ—Ä–∫–∞ OK, –±–∞–ª–∞–Ω—Å = {balance}")
        
        # –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ë–î)
        time.sleep(0.1)
        
        # –°–Ω–∏–º–∞–µ–º –¥–µ–Ω—å–≥–∏
        balance -= amount
        print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –°–Ω—è—Ç–æ {amount}, –æ—Å—Ç–∞—Ç–æ–∫ = {balance}")
    else:
        print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤")

# –°–æ–∑–¥–∞—ë–º 2 –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—ã—Ç–∞—é—Ç—Å—è —Å–Ω—è—Ç—å –¥–µ–Ω—å–≥–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
thread1 = threading.Thread(target=withdraw, args=(800,), name="–ß–µ–ª–æ–≤–µ–∫ 1")
thread2 = threading.Thread(target=withdraw, args=(800,), name="–ß–µ–ª–æ–≤–µ–∫ 2")

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–∞ –ø–æ—Ç–æ–∫–∞
thread1.start()
thread2.start()

# –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
thread1.wait()
thread2.wait()

print(f"\n–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: {balance}")
```

---

## üî• –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:

```
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ OK, –±–∞–ª–∞–Ω—Å = 1000
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ OK, –±–∞–ª–∞–Ω—Å = 1000
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 1: –°–Ω—è—Ç–æ 800, –æ—Å—Ç–∞—Ç–æ–∫ = 200
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 2: –°–Ω—è—Ç–æ 800, –æ—Å—Ç–∞—Ç–æ–∫ = -600

–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: -600
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–ª–∞–Ω—Å —Å—Ç–∞–ª **–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º (-600)**! –≠—Ç–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ.

---

## ü§î –ü–æ—á–µ–º—É —Ç–∞–∫ –ø–æ–ª—É—á–∏–ª–æ—Å—å?

1. **–ü–æ—Ç–æ–∫ 1** –ø—Ä–æ–≤–µ—Ä–∏–ª –±–∞–ª–∞–Ω—Å (1000 >= 800) ‚úÖ ‚Üí OK
2. **–ü–æ—Ç–æ–∫ 2** —Ç–æ–∂–µ –ø—Ä–æ–≤–µ—Ä–∏–ª –±–∞–ª–∞–Ω—Å (1000 >= 800) ‚úÖ ‚Üí OK
3. **–û–±–∞** —Å—á–∏—Ç–∞—é—Ç —á—Ç–æ –¥–µ–Ω–µ–≥ —Ö–≤–∞—Ç–∞–µ—Ç
4. **–ü–æ—Ç–æ–∫ 1** —Å–Ω—è–ª 800 ‚Üí –±–∞–ª–∞–Ω—Å = 200
5. **–ü–æ—Ç–æ–∫ 2** —Å–Ω—è–ª 800 ‚Üí –±–∞–ª–∞–Ω—Å = -600 ‚ùå

–≠—Ç–æ –∏ –µ—Å—Ç—å **Race Condition** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫—Ç–æ "—É—Å–ø–µ–ª –ø–µ—Ä–≤—ã–º".

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lock (–º—å—é—Ç–µ–∫—Å)

```python
import threading
import time

balance = 1000
lock = threading.Lock()  # –°–æ–∑–¥–∞—ë–º "–∑–∞–º–æ–∫"

def withdraw_safe(amount):
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–Ω—è—Ç–∏–µ –¥–µ–Ω–µ–≥"""
    global balance
    
    # –ë–õ–û–ö–ò–†–£–ï–ú –¥–æ—Å—Ç—É–ø –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
    with lock:
        # –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–¥–µ—Å—å
        if balance >= amount:
            print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –ü—Ä–æ–≤–µ—Ä–∫–∞ OK, –±–∞–ª–∞–Ω—Å = {balance}")
            time.sleep(0.1)  # –ó–∞–¥–µ—Ä–∂–∫–∞
            balance -= amount
            print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –°–Ω—è—Ç–æ {amount}, –æ—Å—Ç–∞—Ç–æ–∫ = {balance}")
        else:
            print(f"–ü–æ—Ç–æ–∫ {threading.current_thread().name}: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤")
    # –ó–∞–º–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è

# –°–æ–∑–¥–∞—ë–º –ø–æ—Ç–æ–∫–∏
thread1 = threading.Thread(target=withdraw_safe, args=(800,), name="–ß–µ–ª–æ–≤–µ–∫ 1")
thread2 = threading.Thread(target=withdraw_safe, args=(800,), name="–ß–µ–ª–æ–≤–µ–∫ 2")

thread1.start()
thread2.start()

thread1.join()
thread2.join()

print(f"\n–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: {balance}")
```

---

## ‚úÖ –¢–µ–ø–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:

```
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ OK, –±–∞–ª–∞–Ω—Å = 1000
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 1: –°–Ω—è—Ç–æ 800, –æ—Å—Ç–∞—Ç–æ–∫ = 200
–ü–æ—Ç–æ–∫ –ß–µ–ª–æ–≤–µ–∫ 2: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤

–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: 200
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ!** –í—Ç–æ—Ä–æ–π –ø–æ—Ç–æ–∫ –∂–¥—ë—Ç –ø–æ–∫–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω—á–∏—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å (200) –∏ –≤–∏–¥–∏—Ç —á—Ç–æ –¥–µ–Ω–µ–≥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

---

## üéØ –í—ã–≤–æ–¥:

**Race Condition** - –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏).

**–†–µ—à–µ–Ω–∏–µ:**
- `threading.Lock()` - –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤
- `with lock:` - –±–ª–æ–∫–∏—Ä—É–µ—Ç —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞

---

–ü–æ–Ω—è—Ç–Ω–æ? üöÄ